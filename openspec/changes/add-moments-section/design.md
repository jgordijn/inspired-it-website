## Context

The site is a Next.js 16 static export with markdown-based blog posts. Content lives in `content/blog/` as individual `.md` files with gray-matter frontmatter, parsed by `src/utils/blog.ts`. Static assets (RSS, sitemap) are generated by `scripts/generate-static-assets.js` at build time. Navigation is managed in a single `Layout.tsx` component used by all pages.

The moments feature adds a microblog — short-form notes grouped by date — alongside the existing long-form blog. It needs to fit the same patterns: markdown content, SSG, file-based parsing, and the existing Layout/styling system.

## Goals / Non-Goals

**Goals:**
- Add a `/moments` page that displays short-form content grouped by date (newest first)
- Provide a simple content format that's low-friction to author
- Generate a separate RSS feed (`/moments-rss.xml`) so blog subscribers aren't impacted
- Include moments in the sitemap
- Add navigation links for Moments in header and footer

**Non-Goals:**
- No individual moment pages (no `/moments/2025-02-08` routes) — single scrollable page only
- No tagging/categorization system for moments (keep it simple)
- No search or filtering beyond date navigation
- No pagination — all moments on one page (acceptable for a personal microblog)
- No social sharing per moment
- No comments or reactions

## Decisions

### 1. Content format: One markdown file per day

**Decision**: Use `content/moments/YYYY-MM-DD.md` files, one per day, with a simple frontmatter containing only the date and optional draft status.

**Rationale**: A file-per-day approach mirrors how moments are authored (jotting things down during a day) and keeps the directory manageable. The alternative — one file per moment — would create far more files and require extra metadata to group by date. A single monolithic file was rejected because it doesn't allow per-day draft control and would be unwieldy over time.

**Format**:
```markdown
---
date: '2025-02-08'
publish_status: draft  # optional
---

Some thoughts for the day. Can contain **markdown**, [links](https://example.com), and code.

Another paragraph — just natural markdown flow.
```

Each file is simply rendered as one block of markdown. No special separators or splitting logic needed. Multiple thoughts in a day are just paragraphs.

### 2. Parsing utility: Follow the blog.ts pattern

**Decision**: Create `src/utils/moments.ts` mirroring the structure of `blog.ts` — read files from `content/moments/`, parse with gray-matter, render with markdown-it, filter drafts, sort by date.

**Rationale**: Consistency with the existing codebase. The same libraries (gray-matter, markdown-it) are already dependencies. A shared markdown instance can be extracted later if needed, but for now duplicating the simple markdown-it setup (without the blog-specific admonitions/heading-IDs) keeps things decoupled.

**Alternatives considered**: Extending `blog.ts` to handle both content types was rejected — moments have fundamentally different structure (no slug, no tags, no per-post pages) and mixing them would complicate the blog utility.

### 3. Page structure: Single page with date groups and anchor navigation

**Decision**: One page at `src/pages/moments/index.tsx` showing all moments grouped by date. A sticky sidebar (desktop) or collapsible date list (mobile) provides "jump to date" navigation via anchor links (`#2025-02-08`).

**Rationale**: A microblog doesn't need pagination or separate date pages — the content is short and the page will be fast even with hundreds of entries (it's all static HTML). Anchor-based navigation is simple and requires no client-side routing. The sidebar pattern mirrors how blogs commonly show archives.

**Alternatives considered**: Paginated pages (too complex for minimal content), separate date pages (unnecessary indirection), infinite scroll (requires JS, against SSG philosophy).

### 4. RSS: Extend generate-static-assets.js

**Decision**: Add moments RSS generation to the existing `scripts/generate-static-assets.js` script, producing `public/moments-rss.xml`. Each day's moments become one RSS item, with the date as the title and all moments as the content.

**Rationale**: The build pipeline already runs this script. Adding a second function for moments RSS keeps the build process unified. A separate script would mean another step to remember.

Each RSS item represents one day (not one individual moment), keeping the feed manageable. The RSS entry title will be the formatted date (e.g., "February 8, 2025") and the content will be all moments from that day.

### 5. Layout changes: Add "Moments" to navigation

**Decision**: Add a "Moments" link in the header navigation (both desktop and mobile) between "Blog" and "About". Add it to the footer Quick Links as well. Link the footer to also include `moments-rss.xml`.

**Rationale**: Natural placement — moments are content like blog posts, so they belong next to the Blog link. Footer should mirror header navigation.

## Risks / Trade-offs

**Single-page scalability** → After years of daily moments, the page could become large. Mitigation: This is a static site with short text content — even 1000 days would be manageable. If it becomes an issue, pagination can be added later without changing the content format.

**No individual moment permalinks** → Moments can only be linked to by date anchor, not individually. Mitigation: Acceptable for the microblog use case. Each day's content is linked via its date anchor (e.g., `#2025-02-08`).

**Duplicate markdown-it setup** → The moments utility will have its own markdown-it instance, partially duplicating blog.ts. Mitigation: Moments need simpler rendering (no admonitions, no heading IDs), so the duplication is minimal and intentional. Extracting shared config can be done later.
